<!-- molecules.html -->
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Molecule / Metamaterial Explorer</title>
<style>
html,body {
  margin:0;
  padding:0;
  height:100%;
  font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
  background:#0b0c10;
  color:#e5e9f0;
}
#app {
  display:flex;
  height:100vh;
}
#sidebar {
  width:320px;
  background:#11131a;
  border-right:1px solid #2e3440;
  display:flex;
  flex-direction:column;
}
#sidebar-header {
  padding:12px 16px;
  border-bottom:1px solid #2e3440;
  font-weight:600;
  letter-spacing:0.03em;
  font-size:13px;
  text-transform:uppercase;
}
#sidebar-content {
  padding:10px 14px 12px 14px;
  overflow-y:auto;
  font-size:13px;
}
.sidebar-section-title {
  margin:8px 0 4px 0;
  font-size:11px;
  text-transform:uppercase;
  letter-spacing:0.08em;
  color:#88c0d0;
}
label {
  font-size:12px;
  display:block;
  margin:4px 0 2px 0;
}
input[type="text"],
input[type="number"],
select {
  width:100%;
  box-sizing:border-box;
  padding:4px 6px;
  border-radius:4px;
  border:1px solid #4c566a;
  background:#1b1e26;
  color:#e5e9f0;
  font-size:12px;
}
input[type="number"]::-webkit-inner-spin-button,
input[type="number"]::-webkit-outer-spin-button {
  -webkit-appearance:none;
  margin:0;
}
input[type="number"] {
  appearance:textfield;
  
}
input[type="range"] {
  width:100%;
}
button {
  cursor:pointer;
  border-radius:4px;
  border:1px solid #5e81ac;
  background:#2e3440;
  color:#eceff4;
  font-size:12px;
  padding:5px 8px;
}
button:disabled {
  opacity:0.5;
  cursor:default;
}
.flex-row {
  display:flex;
  gap:6px;
}
.flex-row > * {
  flex:1;
}
.small-text {
  font-size:11px;
  color:#a3be8c;
}
#file-inputs {
  display:flex;
  flex-direction:column;
  gap:6px;
  margin-bottom:8px;
}
#file-inputs input[type="file"] {
  font-size:11px;
}
#type-select-row {
  display:flex;
  gap:6px;
  margin-bottom:4px;
}
#type-select-row select {
  flex:1;
}
#main {
  flex:1;
  display:flex;
  flex-direction:column;
}
#main-header {
  padding:10px 16px;
  border-bottom:1px solid #2e3440;
  display:flex;
  align-items:center;
  justify-content:space-between;
}
#main-header-left {
  display:flex;
  flex-direction:column;
}
#main-header-title {
  font-size:15px;
  font-weight:600;
}
#main-header-sub {
  font-size:11px;
  color:#88c0d0;
}
#main-header-right {
  font-size:11px;
  color:#a3be8c;
}
#main-content {
  flex:1;
  display:flex;
  overflow:hidden;
}
#list-panel {
  width:360px;
  border-right:1px solid #2e3440;
  display:flex;
  flex-direction:column;
}
#list-header {
  padding:8px 10px;
  border-bottom:1px solid #2e3440;
  font-size:12px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}
#list-body {
  flex:1;
  overflow-y:auto;
}
#list-table {
  width:100%;
  border-collapse:collapse;
  font-size:12px;
}
#list-table thead {
  position:sticky;
  top:0;
  background:#151720;
  z-index:1;
}
#list-table th,
#list-table td {
  padding:4px 6px;
  border-bottom:1px solid #2e3440;
  white-space:nowrap;
}
#list-table th {
  font-size:11px;
  text-transform:uppercase;
  letter-spacing:0.06em;
  color:#88c0d0;
}
.list-row {
  cursor:pointer;
}
.list-row:nth-child(odd) {
  background:#11131a;
}
.list-row:nth-child(even) {
  background:#141722;
}
.list-row:hover {
  background:#1f2430;
}
.list-row.selected {
  background:#3b4252;
}
#pagination {
  padding:6px 10px;
  border-top:1px solid #2e3440;
  font-size:11px;
  display:flex;
  align-items:center;
  justify-content:space-between;
}
#pagination-controls {
  display:flex;
  gap:4px;
}
#detail-panel {
  flex:1;
  display:flex;
  flex-direction:column;
}
#viz-panel {
  flex:0 0 55%;
  border-bottom:1px solid #2e3440;
  display:flex;
  flex-direction:column;
}
#viz-header {
  padding:6px 10px;
  font-size:12px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}
#viz-canvas-container {
  flex:1;
  display:flex;
  justify-content:center;
  align-items:center;
  background:#050609;
}
#viz-canvas {
  background:#000000;
  border:1px solid #4c566a;
  border-radius:4px;
}
#stats-panel {
  flex:1;
  display:flex;
  flex-direction:column;
}
#stats-header {
  padding:6px 10px;
  font-size:12px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}
#stats-body {
  flex:1;
  overflow-y:auto;
  padding:6px 10px 10px 10px;
  font-size:12px;
}
.stats-section-title {
  font-size:11px;
  text-transform:uppercase;
  letter-spacing:0.08em;
  margin:6px 0 2px 0;
  color:#88c0d0;
}
.stats-table {
  width:100%;
  border-collapse:collapse;
  font-size:12px;
}
.stats-table td {
  padding:2px 4px;
  border-bottom:1px solid #2e3440;
}
.stats-table td:first-child {
  width:40%;
  color:#d8dee9;
}
.stats-table td:last-child {
  color:#a3be8c;
}
.badge {
  display:inline-block;
  padding:1px 5px;
  border-radius:10px;
  border:1px solid #5e81ac;
  font-size:10px;
  text-transform:uppercase;
  letter-spacing:0.06em;
  margin-left:4px;
}
.badge-molecule {
  border-color:#a3be8c;
  color:#a3be8c;
}
.badge-metamaterial {
  border-color:#b48ead;
  color:#b48ead;
}
</style>
</head>
<body>
<div id="app">
  <div id="sidebar">
    <div id="sidebar-header">Data / Filters</div>
    <div id="sidebar-content">
      <div id="file-inputs">
        <div class="sidebar-section-title">Load JSON</div>
        <div>
          <label for="file-molecules">Molecules (molecules_geom.json)</label>
          <input id="file-molecules" type="file" accept="application/json">
        </div>
        <div>
          <label for="file-metas">Metamaterials (metamaterials_geom.json)</label>
          <input id="file-metas" type="file" accept="application/json">
        </div>
        <div style="margin-top:4px;" class="small-text">
          If hosted via HTTP, default fetch will auto-load
          <span style="color:#ebcb8b;">molecules_geom.json</span> and
          <span style="color:#ebcb8b;">metamaterials_geom.json</span>.
        </div>
      </div>

      <div id="type-select-row">
        <select id="data-type-select">
          <option value="molecule">Molecules</option>
          <option value="metamaterial">Metamaterials</option>
        </select>
        <select id="sort-select">
          <option value="id">Sort: ID</option>
          <option value="mass">Sort: Mass</option>
          <option value="stability">Sort: Stability</option>
          <option value="atoms">Sort: Atom count</option>
        </select>
      </div>

      <div class="sidebar-section-title">Search / Filter</div>
      <label for="filter-formula">Formula / Pattern</label>
      <input id="filter-formula" type="text" placeholder="e.g. H2O, CSi2, Cs1-Pt1">

      <label for="filter-element">Contains element</label>
      <input id="filter-element" type="text" placeholder="Symbol, e.g. C, Si, Pt">

      <div class="flex-row">
        <div>
          <label for="min-atoms">Min atoms</label>
          <input id="min-atoms" type="number" min="1" value="1">
        </div>
        <div>
          <label for="max-atoms">Max atoms</label>
          <input id="max-atoms" type="number" min="1" value="12">
        </div>
      </div>

      <label for="stability-range">Min stability index</label>
      <input id="stability-range" type="range" min="0" max="1" step="0.01" value="0">
      <div class="small-text">
        Current threshold: <span id="stability-range-value">0.00</span>
      </div>

      <div class="sidebar-section-title">Pagination</div>
      <div class="flex-row">
        <div>
          <label for="page-size">Page size</label>
          <input id="page-size" type="number" min="10" max="1000" value="100">
        </div>
        <div style="display:flex;align-items:flex-end;justify-content:flex-end;">
          <button id="apply-filters-btn" style="width:100%;">Apply</button>
        </div>
      </div>

      <div style="margin-top:8px;" class="small-text" id="summary-text">
        No data loaded.
      </div>
    </div>
  </div>

  <div id="main">
    <div id="main-header">
      <div id="main-header-left">
        <div id="main-header-title">Harmonic Molecule Explorer</div>
        <div id="main-header-sub">Navigate lattice-predicted molecules and metamaterials</div>
      </div>
      <div id="main-header-right">
        <span id="main-header-counter">0 items</span>
      </div>
    </div>
    <div id="main-content">
      <div id="list-panel">
        <div id="list-header">
          <span>Results</span>
          <span id="list-header-meta" style="font-size:10px;color:#a3be8c;">0 shown</span>
        </div>
        <div id="list-body">
          <table id="list-table">
            <thead>
              <tr>
                <th>ID</th>
                <th>Formula / Pattern</th>
                <th>Atoms</th>
                <th>Mass</th>
                <th>Stab</th>
              </tr>
            </thead>
            <tbody id="list-tbody"></tbody>
          </table>
        </div>
        <div id="pagination">
          <div id="pagination-info">Page 0 / 0</div>
          <div id="pagination-controls">
            <button id="btn-first">&laquo;</button>
            <button id="btn-prev">&lsaquo;</button>
            <button id="btn-next">&rsaquo;</button>
            <button id="btn-last">&raquo;</button>
          </div>
        </div>
      </div>

      <div id="detail-panel">
        <div id="viz-panel">
          <div id="viz-header">
            <div>
              <span>Geometry</span>
              <span id="viz-tag" class="badge"></span>
            </div>
            <div style="font-size:11px;color:#a3be8c;">
              Scroll to zoom Â· Drag to rotate (pseudo) disabled in this basic version
            </div>
          </div>
          <div id="viz-canvas-container">
            <canvas id="viz-canvas" width="640" height="400"></canvas>
          </div>
        </div>
        <div id="stats-panel">
          <div id="stats-header">
            <div>Stats / Composition</div>
            <div id="stats-title" style="font-size:11px;color:#a3be8c;">No selection</div>
          </div>
          <div id="stats-body">
            <div class="stats-section-title">Instructions</div>
            <div style="font-size:12px;color:#d8dee9;">
              Load <code>molecules_geom.json</code> and/or <code>metamaterials_geom.json</code>, adjust filters, then click a row to view geometry and detailed metrics.
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<script src="molecules.js"></script>
</body>
</html>
